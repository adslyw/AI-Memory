# MEMORY.md - 长期记忆

## 🛠️ 核心知识库

### 技术知识
- **证书验证机制**：TLS 证书验证确保服务器身份真实性，自签名证书常用于开发环境
- **命令行工具参数**：`--insecure` 参数可绕过证书验证，适用于开发环境但存在安全风险
- **npm 包管理**：全局安装使用 `-g` 参数，证书验证错误可用 `--insecure` 解决

### 安全配置最佳实践
- **开发环境**：可以适当放宽安全限制以提高效率
- **生产环境**：必须严格遵循安全规范，禁用证书验证是高风险操作
- **风险评估**：理解风险比盲目禁用安全功能更重要

### 问题解决方法论
- **信息收集**：仔细阅读错误信息，查阅官方文档，搜索社区解决方案
- **系统分析**：理解问题本质，评估不同解决方案的风险和收益
- **记录总结**：详细记录问题和解决过程，提炼可复用的经验

## 🔧 工具使用技巧

### 命令行工具
- **npm 安装**：`npm install -g <package> --insecure` 绕过证书验证
- **curl 请求**：`curl -k <url>` 临时禁用证书验证
- **git 操作**：`git -c http.sslVerify=false clone <repo>` 克隆仓库

### 环境变量配置
- **临时设置**：`export NODE_TLS_REJECT_UNAUTHORIZED=0`
- **命令中设置**：`NODE_TLS_REJECT_UNAUTHORIZED=0 npm install -g <package>`

### 配置文件
- **.npmrc 设置**：`strict-ssl=false` 和 `registry=http://registry.npmjs.org/`

## 📊 经验教训

### 遇到 `UNKNOWN_CERTIFICATE_VERIFICATION_ERROR` 的标准解决办法

#### 方法一：临时绕过（开发环境）
```bash
npm install -g <package> --insecure
curl -k <url>
git -c http.sslVerify=false clone <repo>
```

#### 方法二：信任证书（推荐）
- 添加信任的根证书到系统信任库
- 重新执行操作，保持安全验证

#### 方法三：环境变量配置
```bash
export NODE_TLS_REJECT_UNAUTHORIZED=0
npm install -g <package>
```

#### 方法四：配置文件设置
```json
# .npmrc
strict-ssl=false
registry=http://registry.npmjs.org/
```

#### 选择建议
1. **开发环境**：方法一或方法四（快速解决）
2. **测试环境**：方法二（安全可靠）
3. **生产环境**：绝对不能使用方法一，必须使用方法二
4. **临时调试**：方法三（注意及时恢复）

#### 风险提醒
- `--insecure` 参数会完全禁用证书验证
- 中间人攻击风险显著增加
- 仅限信任的网络环境使用
- 使用后应立即恢复安全设置

## 🚀 自动化任务

### 每日知识总结任务
- **触发时间**：每天晚上 12:00（北京时间）
- **执行步骤**：
  1. 阅读今天的日志 `memory/YYYY-MM-DD.md`
  2. 提取技术知识、踩坑记录、经验教训
  3. 按固定格式写入 `learnings/YYYY-MM-DD.md`
  4. 更新 `MEMORY.md` 中的长期记忆
  5. Git commit（提交每日知识总结）

### 任务状态
- **配置完成**：已启用，下次运行时间：2026-02-22 00:00:00
- **测试结果**：正常运行，已创建学习总结模板

## 📋 邮件配置

### 邮箱信息
- **邮箱地址**：adslyw@foxmail.com（QQ邮箱）
- **授权码**：twhtutocxumcbeje（SMTP/IMAP 专用密码）
- **SMTP 服务器**：smtp.qq.com
- **端口**：465（SSL）

### 配置状态
- **信息已记录**：保存于安全记忆文件
- **功能待启用**：需要配置邮件发送功能

## 📈 系统架构知识

### OpenClaw 配置管理
- **配置文件路径**：`/home/deepnight/.openclaw/openclaw.json`
- **配置结构**：分层配置，支持 profile 和 section 管理
- **动态配置**：支持运行时配置修改和热重载

### 任务调度系统
- **cron 表达式**：`0 0 * * *` 表示每天 00:00
- **任务类型**：支持 systemEvent 和 agentTurn 两种类型
- **执行模式**：isolated 确保任务独立运行

## 🔍 问题解决思维

### 系统化方法
1. **问题定义**：准确理解错误信息和现象
2. **信息收集**：查阅文档、搜索解决方案
3. **方案评估**：分析不同方案的风险和收益
4. **实施验证**：执行解决方案并验证结果
5. **总结记录**：记录过程和经验供以后参考

### 风险意识
- 理解安全配置的影响范围
- 评估临时解决方案的长期风险
- 建立安全回退机制

## 📚 学习习惯

### 知识管理
- **每日记录**：及时记录问题和解决方案
- **结构化总结**：按技术知识、踩坑记录、经验教训分类
- **长期记忆**：定期更新核心知识库
- **版本控制**：使用 Git 管理知识资产

### 持续改进
- 建立可复用的解决方案库
- 定期回顾和优化经验总结
- 分享知识促进团队成长

---
*最后更新：2026-02-22*
*更新内容：新增证书验证错误处理标准解决方案*